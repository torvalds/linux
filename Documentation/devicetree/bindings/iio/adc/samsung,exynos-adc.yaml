# SPDX-License-Identifier: GPL-2.0
%YAML 1.2
---
$id: http://devicetree.org/schemas/iio/adc/samsung,exynos-adc.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Samsung Exynos Analog to Digital Converter (ADC)

maintainers:
  - Krzysztof Kozlowski <krzk@kernel.org>

properties:
  compatible:
    enum:
      - samsung,exynos-adc-v1                 # Exynos5250
      - samsung,exynos-adc-v2
      - samsung,exynos3250-adc
      - samsung,exynos4212-adc                # Exynos4212 and Exynos4412
      - samsung,exynos7-adc
      - samsung,s3c2410-adc
      - samsung,s3c2416-adc
      - samsung,s3c2440-adc
      - samsung,s3c2443-adc
      - samsung,s3c6410-adc
      - samsung,s5pv210-adc

  reg:
    minItems: 1
    maxItems: 2

  clocks:
    description:
      Phandle to ADC bus clock. For Exynos3250 additional clock is needed.
    minItems: 1
    maxItems: 2

  clock-names:
    description:
      Must contain clock names (adc, sclk) matching phandles in clocks
      property.
    minItems: 1
    maxItems: 2

  interrupts:
    maxItems: 1

  "#io-channel-cells":
    const: 1

  vdd-supply:
    description: VDD input supply
    maxItems: 1

  samsung,syscon-phandle:
    $ref: '/schemas/types.yaml#/definitions/phandle'
    description:
      Phandle to the PMU system controller node (to access the ADC_PHY
      register on Exynos5250/5420/5800/3250).

  has-touchscreen:
    description:
      If present, indicates that a touchscreen is connected and usable.
    type: boolean

required:
  - compatible
  - reg
  - clocks
  - clock-names
  - interrupts
  - "#io-channel-cells"
  - vdd-supply

allOf:
  - if:
      properties:
        compatible:
          contains:
            enum:
              - samsung,exynos-adc-v1
              - samsung,exynos-adc-v2
              - samsung,exynos3250-adc
              - samsung,exynos4212-adc
              - samsung,s5pv210-adc
    then:
      properties:
        reg:
          items:
            # For S5P and Exynos
            - description: base registers
            - description: phy registers
      required:
        - samsung,syscon-phandle
    else:
      properties:
        reg:
          items:
            - description: base registers

  - if:
      properties:
        compatible:
          contains:
            enum:
              - samsung,exynos3250-adc
    then:
      properties:
        clocks:
          minItems: 2
          maxItems: 2
        clock-names:
          items:
            - const: adc
            - const: sclk
    else:
      properties:
        clocks:
          minItems: 1
          maxItems: 1
        clock-names:
          items:
            - const: adc

examples:
  - |
    adc: adc@12d10000 {
      compatible = "samsung,exynos-adc-v1";
      reg = <0x12d10000 0x100>;
      interrupts = <0 106 0>;
      #io-channel-cells = <1>;
      io-channel-ranges;

      clocks = <&clock 303>;
      clock-names = "adc";

      vdd-supply = <&buck5_reg>;
      samsung,syscon-phandle = <&pmu_system_controller>;

      /* NTC thermistor is a hwmon device */
      ncp15wb473@0 {
        compatible = "murata,ncp15wb473";
        pullup-uv = <1800000>;
        pullup-ohm = <47000>;
        pulldown-ohm = <0>;
        io-channels = <&adc 4>;
      };
    };

  - |
    adc@126c0000 {
      compatible = "samsung,exynos3250-adc";
      reg = <0x126C0000 0x100>;
      interrupts = <0 137 0>;
      #io-channel-cells = <1>;
      io-channel-ranges;

      clocks = <&cmu 0>, // CLK_TSADC
               <&cmu 1>; // CLK_SCLK_TSADC
      clock-names = "adc", "sclk";

      vdd-supply = <&buck5_reg>;
      samsung,syscon-phandle = <&pmu_system_controller>;
    };
