.. SPDX-License-Identifier: GPL-2.0

====================
i40e devlink support
====================

This document describes the devlink features implemented by the ``i40e``
device driver.

Parameters
==========

.. list-table:: Generic parameters implemented
    :widths: 5 5 90

    * - Name
      - Mode
      - Notes
    * - ``max_mac_per_vf``
      - runtime
      - Controls the maximum number of MAC addresses a VF can use
        on i40e devices.

        By default (``0``), the driver enforces its internally calculated per-VF
        MAC filter limit, which is based on the number of allocated VFS.

        If set to a non-zero value, this parameter acts as a strict cap:
        the driver will use the user-provided value instead of its internal
        calculation.

        **Important notes:**

        - This value **must be set before enabling SR-IOV**.
          Attempting to change it while SR-IOV is enabled will return an error.
        - MAC filters are a **shared hardware resource** across all VFs.
          Setting a high value may cause other VFs to be starved of filters.
        - This value is a **Administrative policy**. The hardware may return
          errors when its absolute limit is reached, regardless of the value
          set here.

        The default value is ``0`` (internal calculation is used).


Info versions
=============

The ``i40e`` driver reports the following versions

.. list-table:: devlink info versions implemented
    :widths: 5 5 5 90

    * - Name
      - Type
      - Example
      - Description
    * - ``board.id``
      - fixed
      - K15190-000
      - The Product Board Assembly (PBA) identifier of the board.
    * - ``fw.mgmt``
      - running
      - 9.130
      - 2-digit version number of the management firmware that controls the
        PHY, link, etc.
    * - ``fw.mgmt.api``
      - running
      - 1.15
      - 2-digit version number of the API exported over the AdminQ by the
        management firmware. Used by the driver to identify what commands
        are supported.
    * - ``fw.mgmt.build``
      - running
      - 73618
      - Build number of the source for the management firmware.
    * - ``fw.undi``
      - running
      - 1.3429.0
      - Version of the Option ROM containing the UEFI driver. The version is
        reported in ``major.minor.patch`` format. The major version is
        incremented whenever a major breaking change occurs, or when the
        minor version would overflow. The minor version is incremented for
        non-breaking changes and reset to 1 when the major version is
        incremented. The patch version is normally 0 but is incremented when
        a fix is delivered as a patch against an older base Option ROM.
    * - ``fw.psid.api``
      - running
      - 9.30
      - Version defining the format of the flash contents.
    * - ``fw.bundle_id``
      - running
      - 0x8000e5f3
      - Unique identifier of the firmware image file that was loaded onto
        the device. Also referred to as the EETRACK identifier of the NVM.
